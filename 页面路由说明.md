# 📚 页面路由说明

## 🎯 页面结构

项目现在有一个完整的多页面路由系统：

```
┌─────────────────────────────────────┐
│         / (首页)                      │
│    📊 K线图系统选择页面                │
│                                     │
│  ┌─────────────┐  ┌──────────────┐ │
│  │ 静态数据版本 │  │ 实时数据版本  │ │
│  │    /static  │  │   /realtime  │ │
│  └─────────────┘  └──────────────┘ │
└─────────────────────────────────────┘
```

## 📄 页面列表

### 1. **首页** - `/` 
**文件**: `pages/index.vue`

**功能**: 
- 欢迎页面，展示系统介绍
- 提供两个选项卡片
- 清晰的导航选择

**访问**: http://localhost:3000/

---

### 2. **静态数据页面** - `/static`
**文件**: `pages/static.vue`

**功能**:
- 使用本地 JSON 数据的K线图
- 快速加载，无需网络
- 适合演示和测试

**特点**:
- ✅ 离线可用
- ✅ 加载速度快
- ✅ 数据稳定

**导航按钮**:
- 🏠 返回首页
- 🔴 跳转到实时数据版本

**访问**: http://localhost:3000/static

---

### 3. **实时数据页面** - `/realtime`
**文件**: `pages/realtime.vue`

**功能**:
- WebSocket 连接 OKX 交易所
- 实时K线数据推送
- 状态监控面板

**特点**:
- ✅ WebSocket 实时推送
- ✅ 自动重连机制
- ✅ 心跳保活
- ✅ 连接状态显示
- ✅ K线统计信息

**导航按钮**:
- 🏠 返回首页
- 📊 跳转到静态数据版本

**访问**: http://localhost:3000/realtime

---

### 4. **测试页面** - `/test` （可选）
**文件**: `pages/test.vue`

**功能**:
- 简单的路由测试页面
- 验证 Nuxt 路由系统是否正常工作

**访问**: http://localhost:3000/test

---

## 🚀 启动步骤

### 1. 启动开发服务器

```bash
cd c:\Users\night\Desktop\okx_trading
npm run dev
```

### 2. 访问页面

打开浏览器访问：**http://localhost:3000/**

你会看到首页，有两个选项：
- 📈 静态数据版本
- 🔴 实时数据版本

### 3. 浏览导航

- 点击卡片跳转到对应页面
- 使用右下角的导航按钮在页面间切换
- 随时返回首页重新选择

---

## 🗂️ 文件结构

```
okx_trading/
├── app/
│   └── app.vue              # 根组件（包含 <NuxtPage />）
├── pages/                   # 页面目录（Nuxt 自动路由）
│   ├── index.vue           # 首页 (/)
│   ├── static.vue          # 静态数据页 (/static)
│   ├── realtime.vue        # 实时数据页 (/realtime)
│   └── test.vue            # 测试页 (/test) [可选]
├── components/              # 组件目录
│   ├── KLineChart.vue      # 静态K线图组件
│   └── KLineChartRealtime.vue  # 实时K线图组件
└── utils/                   # 工具目录
    ├── okxDataService.js   # OKX 数据服务
    └── okxWebSocket.js     # WebSocket 管理器
```

---

## 🔧 Nuxt 路由机制

Nuxt 3 自动根据 `pages/` 目录结构生成路由：

| 文件路径 | 路由 URL | 页面标题 |
|---------|---------|----------|
| `pages/index.vue` | `/` | K线图系统 - 首页 |
| `pages/static.vue` | `/static` | K线图 - 静态数据演示 |
| `pages/realtime.vue` | `/realtime` | K线图 - OKX 实时数据 |
| `pages/test.vue` | `/test` | 路由测试页面 |

---

## 💡 使用场景

### 场景1: 快速演示
1. 访问首页 `/`
2. 选择"静态数据版本"
3. 立即查看K线图，无需等待

### 场景2: 实时交易分析
1. 访问首页 `/`
2. 选择"实时数据版本"
3. 等待 WebSocket 连接
4. 实时查看最新行情

### 场景3: 功能对比
1. 先访问静态数据页 `/static`
2. 点击"实时数据版本"按钮
3. 对比两种模式的差异

---

## 🎨 导航设计

### 首页导航
- 两个大卡片，清晰展示两个版本
- 悬停效果，提升交互体验

### 子页面导航
右下角浮动按钮组：
- 🏠 **返回首页** - 紫色渐变
- 📊/🔴 **切换版本** - 蓝色/红色渐变

### 按钮特效
- 悬停时向上浮动
- 阴影增强效果
- 实时按钮带脉冲动画

---

## ⚠️ 注意事项

### 1. 开发服务器重启
如果修改了 `pages/` 目录下的文件，Nuxt 会自动热重载。如果遇到问题：

```bash
# 停止服务器 (Ctrl+C)
# 重新启动
npm run dev
```

### 2. 清除缓存
如果页面没有更新：

```bash
# 删除 .nuxt 目录
rm -rf .nuxt

# 重新启动
npm run dev
```

### 3. 端口占用
如果端口 3000 被占用：

```bash
# 使用其他端口
PORT=3001 npm run dev
```

---

## 🐛 故障排除

### 问题1: "Create a Vue component in pages/ directory"

**原因**: Nuxt 找不到 pages 目录或没有页面文件

**解决方案**:
1. 确认 `pages/` 目录存在
2. 确认至少有一个 `.vue` 文件（如 `index.vue`）
3. 重启开发服务器

### 问题2: 页面空白

**原因**: 路由未正确加载

**解决方案**:
1. 检查浏览器控制台错误
2. 确认 `app/app.vue` 包含 `<NuxtPage />`
3. 清除缓存并重启

### 问题3: WebSocket 连接失败

**原因**: CORS 或网络问题

**解决方案**:
1. 查看控制台错误信息
2. 考虑创建 API 代理
3. 检查网络连接

---

## 📈 性能优化

### 1. 懒加载组件
使用 `defineAsyncComponent` 异步加载大型组件：

```javascript
const KLineChart = defineAsyncComponent(() => 
  import('../components/KLineChart.vue')
)
```

### 2. ClientOnly 包装
避免 SSR 问题：

```vue
<ClientOnly>
  <KLineChart />
  <template #fallback>
    <div>加载中...</div>
  </template>
</ClientOnly>
```

### 3. 预加载关键资源
在 `nuxt.config.ts` 中配置预加载。

---

## 🎓 学习资源

- [Nuxt 3 路由文档](https://nuxt.com/docs/getting-started/routing)
- [Vue Router 文档](https://router.vuejs.org/)
- [KLineChart 文档](https://www.klinecharts.com)

---

## ✅ 总结

现在你有了一个完整的多页面K线图系统：

1. ✅ **首页** - 清晰的导航选择
2. ✅ **静态数据页** - 快速演示
3. ✅ **实时数据页** - 生产环境
4. ✅ **灵活导航** - 页面间自由切换

**立即体验**: 
```bash
npm run dev
```
然后访问 http://localhost:3000/ 🎉

